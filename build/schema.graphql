type Borrow @entity(immutable: true) {
  id: Bytes!
  sender: Bytes! # address
  asset: Bytes! # address
  amount: BigInt! # uint256
  amountInDollars: BigInt! # uint256
  totalAmountAvailableForBorrowInDollars: BigInt! # uint256
  userPresent: Boolean! # bool
  userIndex: BigInt! # int256
  currentUserTokenBorrowedAmount: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type PayDebt @entity(immutable: true) {
  id: Bytes!
  sender: Bytes! # address
  asset: Bytes! # address
  index: BigInt! # int256
  tokenAmountBorrowed: BigInt! # uint256
  totalTokenAmountToCollectFromUser: BigInt! # uint256
  amountToRepayInUSD: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Supply @entity(immutable: true) {
  id: Bytes!
  sender: Bytes! # address
  asset: Bytes! # address
  amount: BigInt! # uint256
  amountInUSD: BigInt! # uint256
  currentUserTokenLentAmount: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Withdraw @entity(immutable: true) {
  id: Bytes!
  sender: Bytes! # address
  asset: Bytes! # address
  amount: BigInt! # uint256
  amountInUSD: BigInt! # uint256
  totalAmountToWithdraw: BigInt! # uint256
  totalInterest: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type UserAsset @entity {
  id: ID!
  user: User! # Foreign key reference to User
  asset: Bytes!
  supplied: BigInt!
  borrowed: BigInt!
}

type UserLoan @entity {
  id: ID!
  user: User!
  asset: Bytes!
  borrowed: BigInt!
  repaid: BigInt!
}

type User @entity {
  id: ID! # The user ID
  assets: [UserAsset!]! @derivedFrom(field: "user") # All assets for this user
  loans: [UserLoan!]! @derivedFrom(field: "user")
  # updateCount: BigInt!
  portfolio: [UserMonthlyPortfolio!]! @derivedFrom(field: "user")
}

type UserMonthlyPortfolio @entity {
  id: ID!
  user: User!
  supplied: BigInt!
}

type Transaction @entity {
  id: ID!
  event: String!
  block: BigInt!
  timeStamp: BigInt!
  token: Bytes!
  amount: BigInt!
  userId: Bytes! @index
  contract: Bytes
  hash: Bytes
}

type DailyBorrowTopPerformers @entity {
  id: ID!
  borrowed: BigInt!
  asset: Bytes
}

type DailySupplyTopPerformers @entity {
  id: ID!
  supplied: BigInt!
  asset: Bytes
}

type TvlOverview @entity {
  id: ID!
  totalBorrowed: BigInt!
  totalSupplied: BigInt!
  totalBorrowedinUSD: BigInt!
  totalSuppliedinUSD: BigInt!
}

type TransactionCount @entity {
  id: ID!
  updateCount: BigInt!
}
